################################################################################
#
#	IMPORT LIBRARIES
#
################################################################################


from astropy.table import Table


################################################################################
#
#	DEFINE FUNCTION
#
################################################################################


def DsSFR(method):
    '''Calculates the sSFR relative to the median sSFR for a given stellar mass'''
    
    ############################################################################
    #
    #	INPUTS
    #
    ############################################################################
    
    fileName = method + '.txt'
    
    ############################################################################
    #
    #	IMPORT DATA
    #
    ############################################################################
    
    galaxy_data = Table.read(fileName, format='ascii.commented_header')
    
    ############################################################################
    #
    #	CALCULATE delta sSFR
    #
    ############################################################################
    '''Equation 6 of Brown16'''
    
    median_sSFR_Mstar = 283.728 - 116.265*galaxy_data['Mstar'] + 17.4403*(galaxy_data['Mstar'])**2 - 1.17146*(galaxy_data['Mstar'])**3 + 0.0296526*(galaxy_data['Mstar'])**4
    
    delta_sSFR = galaxy_data['sSFR'] - median_sSFR_Mstar
    
    ############################################################################
    #
    #	ADD DATA TO TABLE
    #
    ############################################################################
    
    galaxy_data['D_sSFR'] = delta_sSFR
    
    ############################################################################
    #
    #	SAVE TABLE
    #
    ############################################################################
    
    galaxy_data.write(fileName, format='ascii.commented_header', overwrite='True')